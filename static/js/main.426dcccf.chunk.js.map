{"version":3,"sources":["assets/bg.jpg","serviceWorker.ts","index.tsx","api/axios.ts","api/index.ts","widget/Search.tsx","widget/Header.tsx","page/NotFound.tsx","widget/Publish.tsx","App.tsx"],"names":["module","exports","Boolean","window","location","hostname","match","ReactDOM","render","App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","DOMAIN","get","url","params","Promise","resolve","reject","axios","res","data","catch","err","post","qs","stringify","defaults","baseURL","timeout","interceptors","request","use","config","authorization","Cookies","headers","Authorization","response","status","error","console","log","remove","path","domain","replace","DOMAIN_STATIC","GET_ARTICLES","para","GET_PERSON_ACTIVE_RANKINGS","GET_ARTICLE_POPULARITY","GET_ARTICLE_INFO","SET_COMMENT_SAVE","GET_COMMENTS","GET_NOTICES","GET_NOTICE_NUM","UPLOAD","SET_ARTICLE_SAVE","SET_ARTICLE_UPDATE","SET_ARTICLE_DELETE","SET_NOTICE_READ","GET_SEARCH_RESULT","GET_ARTICLE_BY_UID","GET_ARTICLE_BY_KEYWORD","GET_TAGS","SET_FOLLOW","GET_ARTICLES_BY_USER","GET_USERINFO_BY_NAME","GET_FOLLOWING","GET_FOLLOWERS","GET_MY_FOLLOWS","S","Search","styled","div","Input","input","Icon","i","T","props","useState","keyword","setKeyword","className","onClick","href","placeholder","onChange","e","target","value","onKeyUp","keyCode","Header","Content","Title","SubTitle","span","src","alt","style","marginLeft","NotFound","fontSize","Back","show","TagBox","BtnBox","Btn","title","EditorBox","ContentLeft","ContentRight","Input2","AddBtn","List","Tips","BraftEditor","createEditorState","editorState","_editorState","_title","tag","_tag","tagText","_tagText","useContext","AppContext","setShowPublish","showPublish","articleInfo","useEffect","content","split","media","uploadFn","param","fd","FormData","append","file","success","position","type","length","indexOf","tag_temp","JSON","parse","push","paddingTop","map","item","index","key","color","fontWeight","marginRight","splice","preview_img","entityMap","toRAW","update","toHTML","preview_content","toText","substr","join","id","rs","reload","Container","bg","Body","BodyContent","createContext","setArticleInfo","Home","React","lazy","ArticleInfo","Message","SearchResult","NoPermission","Users","Provider","Suspense","fallback","Publish","exact","component","textAlign","padding","textDecoration"],"mappings":"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","file":"static/js/main.426dcccf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg.ff6b6192.jpg\";","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport \"./index.css\"\r\nimport App from \"./App\"\r\nimport * as serviceWorker from \"./serviceWorker\"\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n","import axios from \"axios\"\r\nimport qs from \"querystring\"\r\n// import codeMessage from \"./codeMessage\";\r\nimport Cookies from \"js-cookie\"\r\n\r\nlet DOMAIN = \"\"\r\nif (process.env.NODE_ENV === \"development\") {\r\n  DOMAIN = \"http://localhost:5679\"\r\n} else if (process.env.NODE_ENV === \"production\") {\r\n  DOMAIN = \"http://api.taswell.cn\"\r\n}\r\n\r\nDOMAIN = \"http://api.taswell.cn\"\r\n\r\naxios.defaults.baseURL = DOMAIN + \"/blog\"\r\n\r\naxios.defaults.timeout = 1000 * 60 * 2\r\n\r\naxios.interceptors.request.use((config) => {\r\n  const authorization = Cookies.get(\"twa\")\r\n  authorization && (config.headers.Authorization = authorization)\r\n  return config\r\n})\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    if (response.status === 200) {\r\n      return Promise.resolve(response)\r\n    } else {\r\n      return Promise.reject(response)\r\n    }\r\n  },\r\n  (error) => {\r\n    console.log({ error })\r\n    const { response } = error\r\n    const { status } = response\r\n    if (status === 401) {\r\n      Cookies.remove(\"twa\", { path: \"/\", domain: \".taswell.cn\" })\r\n      window.location.replace(\"#/nopermission\")\r\n      // window.location.reload()\r\n    }\r\n    return Promise.reject({ error })\r\n  }\r\n)\r\n\r\nexport function get(url: any, params: any) {\r\n  // console.log({url, params});\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(url, {\r\n        params: params,\r\n      })\r\n      .then((res) => {\r\n        resolve(res.data)\r\n      })\r\n      .catch((err) => {\r\n        reject({ err })\r\n      })\r\n  })\r\n}\r\n\r\nexport function post(url: any, params: any) {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .post(url, qs.stringify(params))\r\n      .then((res) => {\r\n        resolve(res.data)\r\n      })\r\n      .catch((err) => {\r\n        reject({ err })\r\n      })\r\n  })\r\n}\r\n\r\nexport function fileUpload(url: any, params: any) {\r\n  return new Promise((resolve, reject) => {\r\n    let config = { headers: { \"Content-Type\": \"multipart/form-data\" } }\r\n    axios\r\n      .post(url, params, config)\r\n      .then((res) => {\r\n        resolve(res.data)\r\n      })\r\n      .catch((err) => {\r\n        reject({ err })\r\n      })\r\n  })\r\n}\r\n","import { get, fileUpload, post } from \"./axios\"\r\n\r\nexport const DOMAIN_STATIC = \"http://static.taswell.cn\"\r\n\r\nexport const GET_ARTICLES = (para?: any) => get(\"/articles\", para)\r\nexport const GET_PERSON_ACTIVE_RANKINGS = (para?: any) =>\r\n  get(\"/person_active_rankings\", para)\r\nexport const GET_ARTICLE_POPULARITY = (para?: any) =>\r\n  get(\"/article_popularity\", para)\r\nexport const GET_ARTICLE_INFO = (para?: any) => get(\"/article_info\", para)\r\nexport const SET_COMMENT_SAVE = (para?: any) => get(\"/comment_save\", para)\r\nexport const GET_COMMENTS = (para?: any) => get(\"/comments\", para)\r\nexport const GET_NOTICES = (para?: any) => get(\"/notices\", para)\r\nexport const GET_NOTICE_NUM = (para?: any) => get(\"/notice_num\", para)\r\nexport const UPLOAD = (para?: any) => fileUpload(\"/upload\", para)\r\nexport const SET_ARTICLE_SAVE = (para?: any) => post(\"/save\", para)\r\nexport const SET_ARTICLE_UPDATE = (para?: any) => post(\"/update\", para)\r\nexport const SET_ARTICLE_DELETE = (para?: any) => post(\"/delete\", para)\r\nexport const SET_NOTICE_READ = (para?: any) => get(\"/notice_read\", para)\r\nexport const GET_SEARCH_RESULT = (para?: any) => get(\"/search\", para)\r\nexport const GET_ARTICLE_BY_UID = (para?: any) => get(\"/user_articles\", para)\r\nexport const GET_ARTICLE_BY_KEYWORD = (para?: any) =>\r\n  get(\"/keyword_articles\", para)\r\nexport const GET_TAGS = (para?: any) => get(\"/tags\", para)\r\nexport const SET_FOLLOW = (para?: any) => get(\"/follow\", para)\r\nexport const GET_ARTICLES_BY_USER = (para?: any) =>\r\n  get(\"/articles_by_user\", para)\r\nexport const GET_USERINFO_BY_NAME = (para?: any) =>\r\n  get(\"/userinfo_by_name\", para)\r\nexport const GET_FOLLOWING = (para?: any) => get(\"/following\", para)\r\nexport const GET_FOLLOWERS = (para?: any) => get(\"/followers\", para)\r\nexport const GET_MY_FOLLOWS = (para?: any) => get(\"/my_follows\", para)\r\n","import React, { useState } from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst S = {\r\n  Search: styled.div`\r\n    position: relative;\r\n    width: 280px;\r\n    height: 30px;\r\n  `,\r\n  Input: styled.input`\r\n    background: #eee;\r\n    border: none;\r\n    outline: none;\r\n    height: 100%;\r\n    color: #444;\r\n    width: 100%;\r\n    padding-left: 15px;\r\n    padding-right: 35px;\r\n  `,\r\n  Icon: styled.i`\r\n    position: absolute;\r\n    color: #555;\r\n    right: 10px;\r\n    top: 6px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    :hover {\r\n      color: #222;\r\n    }\r\n  `,\r\n}\r\n\r\nconst T: React.FC = (props) => {\r\n  const [keyword, setKeyword] = useState<any>(\"\")\r\n\r\n  return (\r\n    <S.Search>\r\n      <S.Icon\r\n        className=\"iconfont icon-search1\"\r\n        onClick={() => {\r\n          window.location.href = `/#/searchresult/${keyword}`\r\n        }}\r\n      />\r\n      <S.Input\r\n        placeholder={\"Title or Tag\"}\r\n        onChange={(e: any) => {\r\n          setKeyword(e.target.value)\r\n        }}\r\n        onKeyUp={(e) => {\r\n          if (e.keyCode === 13) {\r\n            window.location.href = `/#/searchresult/${keyword}`\r\n          }\r\n        }}\r\n      />\r\n    </S.Search>\r\n  )\r\n}\r\n\r\nexport default T\r\n","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nimport Search from \"./Search\"\r\n\r\nconst S = {\r\n  Header: styled.div`\r\n    height: 50px;\r\n    display: flex;\r\n    left: 0px;\r\n    top: 0px;\r\n    z-index: 999;\r\n    width: 100%;\r\n    background: #fff;\r\n    box-shadow: 0px 0px 10px rgb(0 0 0 / 0.22);\r\n  `,\r\n  Content: styled.div`\r\n    width: 1000px;\r\n    margin: 0 auto;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  `,\r\n  Title: styled.div`\r\n    color: #000;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 300px;\r\n  `,\r\n  SubTitle: styled.span`\r\n    font-size: 12px;\r\n  `,\r\n}\r\n\r\nconst T: React.FC = () => {\r\n  return (\r\n    <S.Header>\r\n      <S.Content>\r\n        <S.Title\r\n          onClick={() => {\r\n            window.location.href = \"/\"\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              \"http://static.taswell.cn/icon/QQ%E5%9B%BE%E7%89%8720200817145351.gif\"\r\n            }\r\n            alt=\"\"\r\n          />\r\n          小花\r\n          <S.SubTitle>Who threatens my concentration?</S.SubTitle>\r\n          <i className={\"iconfont icon-leaf\"} style={{ marginLeft: 5 }}></i>\r\n        </S.Title>\r\n        <Search />\r\n      </S.Content>\r\n    </S.Header>\r\n  )\r\n}\r\n\r\nexport default T\r\n","import * as React from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst S: any = {\r\n  NotFound: styled.div`\r\n    font-size: 30px;\r\n    text-align: center;\r\n    width: 100%;\r\n  `,\r\n}\r\n\r\nconst T: React.FC = () => {\r\n  return (\r\n    <S.NotFound>\r\n      <i className={\"iconfont icon-zanwu\"} style={{ fontSize: 40 }}></i>\r\n      <div>- 404 -</div>\r\n    </S.NotFound>\r\n  )\r\n}\r\n\r\nexport default T\r\n","import React, { useState, useContext, useEffect } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport BraftEditor from \"braft-editor\"\r\nimport \"braft-editor/dist/index.css\"\r\nimport {\r\n  UPLOAD,\r\n  SET_ARTICLE_SAVE,\r\n  SET_ARTICLE_UPDATE,\r\n  DOMAIN_STATIC,\r\n} from \"../api\"\r\nimport { AppContext } from '../App'\r\n\r\nconst S = {\r\n  Content: styled.div`\r\n    padding: 15px;\r\n    width: 950px;\r\n    background: #fff;\r\n    margin-top: 70px;\r\n    display: flex;\r\n  `,\r\n  Input: styled.input`\r\n    outline: none;\r\n    border: none;\r\n    background: #f4f4f4;\r\n    height: 34px;\r\n    width: 100%;\r\n    font-size: 15px;\r\n    color: #777;\r\n    text-indent: 10px;\r\n  `,\r\n  Back: styled.div<any>`\r\n    position: fixed;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0px;\r\n    top: 0px;\r\n    z-index: 99999;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: start;\r\n    justify-content: center;\r\n    opacity: ${props => props.show ? 1 : 0};\r\n    visibility: ${props => props.show ? 'unset' : 'hidden'};\r\n    transition: 0.2s;\r\n  `,\r\n  TagBox: styled.div`\r\n    flex: 1;\r\n  `,\r\n  BtnBox: styled.div`\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  `,\r\n  Btn: styled.div`\r\n    height: 30px;\r\n    background: ${(props: any) => (props.title ? \"#000\" : \"#eee\")};\r\n    color: ${(props: any) => (props.title ? \"#fff\" : \"unset\")};\r\n    line-height: 30px;\r\n    padding: 0px 10px;\r\n    margin-left: 10px;\r\n    font-size: 13px;\r\n    cursor: pointer;\r\n  `,\r\n  EditorBox: styled.div`\r\n    background: unset;\r\n  `,\r\n  ContentLeft: styled.div`\r\n    width: 700px;\r\n    padding-right: 10px;\r\n    border-right: 1px dashed #ccc;\r\n  `,\r\n  ContentRight: styled.div`\r\n    flex: 1;\r\n    padding-left: 10px;\r\n    display: flex;\r\n    flex-direction: column;\r\n  `,\r\n  Input2: styled.input`\r\n    outline: none;\r\n    border: none;\r\n    background: #f4f4f4;\r\n    height: 34px;\r\n    width: 170px;\r\n    font-size: 15px;\r\n    color: #777;\r\n    text-indent: 10px;\r\n  `,\r\n  AddBtn: styled.div`\r\n    height: 34px;\r\n    width: 34px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background: #ccc;\r\n    position: absolute;\r\n    right: 0px;\r\n    top: 0px;\r\n  `,\r\n  List: styled.div`\r\n    position: relative;\r\n    float: left;\r\n    background: #eaeaea;\r\n    color: #1b1b1b;\r\n    font-size: 13px;\r\n    margin: 5px;\r\n    padding: 5px;\r\n    & > i {\r\n      margin-left: 5px;\r\n      font-size: 12px;\r\n      cursor: pointer;\r\n    }\r\n  `,\r\n  Tips: styled.div`\r\n    text-align: center;\r\n    font-size: 12px;\r\n    color: #bbb;\r\n    overflow: hidden;\r\n    width: 100%;\r\n  `,\r\n}\r\n\r\nconst T: React.FC<any> = () => {\r\n  const [editorState, _editorState] = useState<any>(\r\n    BraftEditor.createEditorState(null)\r\n  )\r\n  const [title, _title] = useState<any>(\"\")\r\n  const [tag, _tag] = useState<any>([])\r\n  const [tagText, _tagText] = useState<any>(\"\")\r\n\r\n  const { setShowPublish, showPublish, articleInfo } = useContext<any>(AppContext)\r\n\r\n  useEffect(() => {\r\n    articleInfo.content && _editorState(BraftEditor.createEditorState(articleInfo.content))\r\n    articleInfo.title && _title(articleInfo.title)\r\n    articleInfo.tag && _tag(articleInfo.tag.split(\"|\"))\r\n  }, [articleInfo])\r\n\r\n  const myUploadFn = (param: any) => {\r\n    var fd = new FormData()\r\n    fd.append(\"file\", param.file)\r\n    UPLOAD(fd).then((res) => {\r\n      param.success({ url: res })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <S.Back show={showPublish}>\r\n      <S.Content>\r\n        <S.ContentLeft>\r\n          <S.Input\r\n            placeholder={\"Title\"}\r\n            onChange={(e: any) => {\r\n              _title(e.target.value)\r\n            }}\r\n            value={title}\r\n          />\r\n          <S.EditorBox>\r\n            <BraftEditor\r\n              className={\"bigeditor\"}\r\n              media={{\r\n                uploadFn: myUploadFn,\r\n                // validateFn: myValidateFn\r\n              }}\r\n              value={editorState}\r\n              onChange={(e: any) => {\r\n                _editorState(e)\r\n              }}\r\n            />\r\n          </S.EditorBox>\r\n        </S.ContentLeft>\r\n        <S.ContentRight>\r\n          <S.TagBox>\r\n            <div style={{ position: \"relative\" }}>\r\n              <S.Input2\r\n                type=\"text\"\r\n                placeholder={\"Tag\"}\r\n                onChange={(e: any) => {\r\n                  _tagText(e.target.value)\r\n                }}\r\n                value={tagText}\r\n              />\r\n              <S.AddBtn\r\n                onClick={() => {\r\n                  if (\r\n                    !tagText ||\r\n                    tag.length === 10 ||\r\n                    tag.indexOf(tagText) >= 0\r\n                  )\r\n                    return\r\n                  const tag_temp = JSON.parse(JSON.stringify(tag))\r\n                  tag_temp.push(tagText)\r\n                  _tag(tag_temp)\r\n                  _tagText(\"\")\r\n                }}\r\n              >\r\n                <i className={\"iconfont icon-moreunfold\"}></i>\r\n              </S.AddBtn>\r\n            </div>\r\n            <div style={{ paddingTop: 10 }}>\r\n              {tag.map((item: any, index: any) => {\r\n                return (\r\n                  <S.List key={index}>\r\n                    <span\r\n                      style={{\r\n                        color: \"#999\",\r\n                        fontWeight: \"bold\",\r\n                        marginRight: 3,\r\n                      }}\r\n                    >\r\n                      #\r\n                    </span>\r\n                    {item}\r\n                    <i\r\n                      className={\"iconfont icon-close\"}\r\n                      onClick={() => {\r\n                        const tag_temp = JSON.parse(JSON.stringify(tag))\r\n                        tag_temp.splice(index, 1)\r\n                        _tag(tag_temp)\r\n                      }}\r\n                    ></i>\r\n                  </S.List>\r\n                )\r\n              })}\r\n            </div>\r\n            <S.Tips>- Add up to 10 tags -</S.Tips>\r\n          </S.TagBox>\r\n          <S.BtnBox>\r\n            <S.Btn\r\n              onClick={() => {\r\n                _editorState(BraftEditor.createEditorState(null))\r\n                _title(\"\")\r\n                _tag([])\r\n                _tagText(\"\")\r\n                // @ts-ignore\r\n                // alert.hidePublish()\r\n                setShowPublish(false)\r\n              }}\r\n            >\r\n              CANCEL\r\n            </S.Btn>\r\n            <S.Btn\r\n              title={\"confirm\"}\r\n              onClick={() => {\r\n                let preview_img = []\r\n                try {\r\n                  const arr = JSON.parse(editorState.toRAW())\r\n                  const { entityMap } = arr\r\n                  for (let key in entityMap) {\r\n                    let url = entityMap[key].data.url\r\n                    if (url && url.indexOf(DOMAIN_STATIC) >= 0) {\r\n                      preview_img.push(url + \"?x-oss-process=style/small\")\r\n                    }\r\n                  }\r\n                } catch (e) { }\r\n                console.log(articleInfo.update)\r\n                if (articleInfo.update) {\r\n                  SET_ARTICLE_UPDATE({\r\n                    title,\r\n                    content: editorState.toHTML(),\r\n                    preview_img: JSON.stringify(preview_img),\r\n                    preview_content: editorState.toText().substr(0, 200),\r\n                    tag: tag.join(\"|\"),\r\n                    id: articleInfo.id,\r\n                  }).then((rs) => {\r\n                    window.location.reload()\r\n                  })\r\n                } else {\r\n                  SET_ARTICLE_SAVE({\r\n                    title,\r\n                    content: editorState.toHTML(),\r\n                    preview_img: JSON.stringify(preview_img),\r\n                    preview_content: editorState.toText().substr(0, 200),\r\n                    tag: tag.join(\"|\"),\r\n                  }).then((rs) => {\r\n                    window.location.reload()\r\n                  })\r\n                }\r\n              }}\r\n            >\r\n              CONFIRM\r\n            </S.Btn>\r\n          </S.BtnBox>\r\n        </S.ContentRight>\r\n      </S.Content>\r\n    </S.Back>\r\n  )\r\n}\r\n\r\nexport default T\r\n","import React, { createContext, useState } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport Header from \"./widget/Header\"\r\nimport NotFound from \"./page/NotFound\"\r\nimport Publish from \"./widget/Publish\"\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\"\r\nimport bg from './assets/bg.jpg'\r\n\r\nconst S: any = {\r\n  Container: styled.div`\r\n    display: flex;\r\n    background: url(${bg});\r\n    background-size: cover;\r\n    width: 100%;\r\n    height: 100%;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 1;\r\n    flex-direction: column;\r\n  `,\r\n  Body: styled.div`\r\n    flex: 1;\r\n    overflow: auto;\r\n  `,\r\n  BodyContent: styled.div`\r\n    width: 1000px;\r\n    margin: 20px auto;\r\n    display: flex;\r\n  `,\r\n}\r\n\r\nexport const AppContext = createContext({})\r\n\r\nconst T: React.FC = () => {\r\n  const [showPublish, setShowPublish] = useState(false)\r\n  const [articleInfo, setArticleInfo] = useState({})\r\n\r\n  const Home = React.lazy(() => import(\"./page/Home\"))\r\n  const ArticleInfo = React.lazy(() => import(\"./page/ArticleInfo\"))\r\n  const Message = React.lazy(() => import(\"./page/Message\"))\r\n  const SearchResult = React.lazy(() => import(\"./page/SearchResult\"))\r\n  const NoPermission = React.lazy(() => import(\"./page/NoPermission\"))\r\n  const Users = React.lazy(() => import(\"./page/Users\"))\r\n\r\n  return (\r\n    <AppContext.Provider value={{ setShowPublish, showPublish, setArticleInfo, articleInfo }}>\r\n      <React.Suspense fallback={<div>Loading...</div>}>\r\n        <S.Container>\r\n          <Publish showPublish={showPublish} />\r\n          <Header />\r\n          <S.Body>\r\n            <S.BodyContent>\r\n              <Router>\r\n                <Switch>\r\n                  <Route exact path=\"/\" component={Home} />\r\n                  <Route path=\"/article/:id\" component={ArticleInfo} />\r\n                  <Route path=\"/message\" component={Message} />\r\n                  <Route path=\"/searchresult/:keyword\" component={SearchResult} />\r\n                  <Route path=\"/nopermission\" component={NoPermission} />\r\n                  <Route path=\"/users/:name\" component={Users} />\r\n                  <Route component={NotFound} />\r\n                </Switch>\r\n              </Router>\r\n            </S.BodyContent>\r\n            {/* <Login /> */}\r\n            <div\r\n              style={{\r\n                textAlign: \"center\",\r\n                fontSize: 12,\r\n                padding: 10,\r\n                color: \"#000\",\r\n              }}\r\n            >\r\n              -- Powered by Flower ©2020 --\r\n          <br />\r\n              <a\r\n                href=\"http://www.beian.miit.gov.cn/\"\r\n                style={{ textDecoration: \"none\", color: \"#000\" }}\r\n              >\r\n                苏ICP备19039887号\r\n          </a>\r\n            </div>\r\n          </S.Body>\r\n        </S.Container>\r\n      </React.Suspense>\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n\r\nexport default T\r\n"],"sourceRoot":""}